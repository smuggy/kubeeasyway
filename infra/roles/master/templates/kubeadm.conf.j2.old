---
apiVersion: kubeadm.k8s.io/v1beta2
kind: InitConfiguration
nodeRegistration:
  name: "{{ hostname }}"
  criSocket: "/var/run/crio/crio.sock"
  kubeletExtraArgs:
    feature-gates: "RunAsGroup=true"
    cloud-provider: "external"
    hostname-override: "{{ hostname }}"
    cgroup-driver: "systemd"
    container-runtime: remote
    container-runtime-endpoint: "/var/run/crio/crio.sock"
...
---
apiVersion: kubeadm.k8s.io/v1beta2
kind: ClusterConfiguration
apiServer:
  extraArgs:
    cloud-provider: "external"
  certSANs:
    - "{{ publicname }}"
    - "{{ hostname }}"
    - "kubernetes"
    - "kubernetes.default"
    - "kubernetes.default.svc"
    - "kubernetes.default.svc.cluster.local"
    - "{{ privateip }}"
    - "10.96.0.1"
clusterName: "testcluster"
controllerManager:
  extraArgs:
    cloud-provider: "external"
    configure-cloud-routes: "false"
etcd:
  local:
    serverCertSANs:
      - "{{ publicname }}"
      - "{{ hostname }}"
      - "localhost"
      - "{{ privateip }}"
      - "127.0.0.1"
      - "::1"
    peerCertSANs:
      - "{{ publicname }}"
      - "{{ hostname }}"
      - "localhost"
      - "{{ privateip }}"
      - "127.0.0.1"
      - "::1"
#cloudControllerManager:
#  cloudProvider: "aws"
#kubernetesVersion: stable
networking:
  dnsDomain: "cluster.local"
  podSubnet: "10.244.0.0/16"
  serviceSubnet: "10.96.0.0/16"
...
